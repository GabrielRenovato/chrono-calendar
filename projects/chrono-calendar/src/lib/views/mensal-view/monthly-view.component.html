<div class="month-grid-header">
    @for (weekday of weekdays; track weekday) {
    <div class="weekday">{{ weekday }}</div>
    }
</div>

<div class="month-grid-body" cdkDropListGroup>
    @for (day of days; track day.date.toISODate()) {
    <div class="day-cell" [class.not-current-month]="!day.isCurrentMonth" (click)="dayClicked.emit(day.date)"
        cdkDropList [cdkDropListDisabled]="!enableDragDrop" [cdkDropListData]="day.events" [id]="getDayId(day)"
        (cdkDropListDropped)="onEventDrop($event, day)">

        <span class="day-number" [class.today]="day.isToday">{{ day.date.day }}</span>

        <div class="events-container">
            @for (event of day.events; track event.id) {
            <div class="event-chip" [style.background-color]="event.color || '#3b82f6'"
                [style.cursor]="enableDragDrop ? 'move' : 'pointer'" cdkDrag [cdkDragDisabled]="!enableDragDrop"
                [cdkDragData]="event" (click)="$event.stopPropagation(); eventClicked.emit(event)">

                <div class="event-chip-content">
                    <strong>{{ event.start.toFormat('HH:mm') }}</strong>
                    <p class="event-title" [appTooltip]="event.start.toFormat('HH:mm') + ' ' + event.title">
                        {{ event.title }}
                    </p>
                </div>
            </div>
            }
        </div>
    </div>
    }
</div>