<div class="week-view-wrapper">
    <!-- CabeÃ§alho dos Dias (Fixo) -->
    <div class="week-header">
        <div class="hour-gutter-header"></div>
        @for (dia of dias; track dia.data) {
        <div class="day-header" [class.today-header]="dia.eHoje">
            <p class="weekday-label">{{ diasDaSemana[dia.data.getDay()] }}</p>
            <p class="day-label" [class.today-number]="dia.eHoje">{{ dia.data.getDate() }}</p>
        </div>
        }
    </div>

    <!-- Corpo da Agenda (com scroll) -->
    <div class="week-body">
        <!-- Coluna das Horas -->
        <div class="hour-gutter">
            @for(hora of horasDoDia; track hora) {
            <div class="hour-segment">
                <span class="hour-label">{{ hora }}</span>
            </div>
            }
        </div>

        <!-- Container dos Dias -->
        <div class="days-container">
            @for (dia of dias; track dia.data) {
            <div class="day-column" [class.today-column]="dia.eHoje" (click)="diaClicado.emit(dia.data)">
                <!-- Linhas de Hora -->
                @for(hora of horasDoDia; track hora) {
                <div class="hour-line"></div>
                }
                <!-- Eventos -->
                @for(evento of dia.eventos; track evento.id) {
                <div class="event-card" [style.background-color]="evento.cor || '#3b82f6'"
                    [style.top.px]="calcularPosicaoEvento(evento)" [style.height.px]="calcularAlturaEvento(evento)"
                    (click)="$event.stopPropagation(); eventoClicado.emit(evento)">
                    <p class="event-time">{{ evento.inicio.toLocaleTimeString('pt-BR', { hour: '2-digit', minute:
                        '2-digit' }) }} - {{ evento.fim.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit'
                        }) }}</p>
                    <p class="event-title">{{ evento.titulo }}</p>
                </div>
                }
            </div>
            }
        </div>
    </div>
</div>